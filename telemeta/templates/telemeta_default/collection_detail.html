{% extends "telemeta/base.html" %}
{% load telemeta_utils %}
{% load i18n %}

{% block extra_javascript %}
<script src="{% url telemeta-js "jquery.js" %}" type="text/javascript"></script>
<script src="{% url telemeta-js "application.js" %}" type="text/javascript"></script>
<script src="{% url telemeta-js "swfobject.js" %}" type="text/javascript"></script>
{% endblock %}

{% if collection %}

{% block submenu %}
    <h3>Collection: {{ collection.title }}</h3>
    <div><a href="{% url telemeta-collection-dublincore collection.public_id %}">Dublin Core</a></div>
{% endblock %}

{% block content %}
    <div class="{% if collection.has_mediafile %}with-rightcol{% endif %}">
        {% if collection.has_mediafile %}
        <div id="rightcol">
            <div id="collection_player">
              <p><b>Listen to this collection</b>
              (<a href="{% url telemeta-collection-m3u collection.public_id %}">M3U</a>,
              <a href="{% url telemeta-collection-xspf collection.public_id %}">XSPF</a>)</p>
                <!-- This is Jeroen Wijering's Flash MP3 Player, 
                  under CC Attribution-NonCommercial-ShareAlike 2.0 license
                  from: http://www.jeroenwijering.com/?item=Flash_MP3_Player-->
                <p id="collection_player_c">
                  <a href="http://www.macromedia.com/go/getflashplayer">Get Flash</a> to see this player.
                </p>
                <script type="text/javascript">
                  var so = new SWFObject('{% url telemeta-swf "mp3player.swf" %}','playlist','362','200','7');
                  so.addVariable("file","{% url telemeta-collection-xspf collection.public_id %}");
                  so.addVariable("displayheight","0");
                  so.write('collection_player_c');
                </script> 
            </div>
        </div>
        {% endif %}
        <div class="intro">
            <span>{% if collection.items.count %}{{ collection.items.count }} {% ifequal collection.items.count 1 %}item{% else %}items{% endifequal %}{% else %}No item{% endif %}</span>
        </div>
        <div class="infos">
        {% block general_info %}
            <dl class="listing">
                {% dl_field collection.title %}
                {% dl_field collection.alt_title %}
                {% dl_field collection.creator %}
                {% if collection.recorded_from_year %}
                <dt>{% trans "Recording year" %}</dt>
                <dd>{{ collection.recorded_from_year }} {{ collection.recorded_to_year|prepend:" - "  }}</dd>
                {% endif %}
                {% dl_field collection.year_published %}
            </dl>
        {% endblock general_info %}
        </div>
        <div class="extraInfos">
        {% block geoethnic_data %}
            <div>
                <h4><a href="#">{% trans "Geographic and cultural informations" %}</a></h4>
                <div>
                    <dl class="listing">
                    {% dl_field collection.countries join with ", " %}
                    {% dl_field collection.ethnic_groups join with ", " %}
                    </dl>
                </div>
            </div>
        {% endblock geoethnic_data %}
        </div>
        <div class="extraInfos">
        {% block legal_data %}
            <div>
                <h4><a href="#">{% trans "Legal mentions" %}</a></h4>
                <div>
                    <dl class="listing">
                        {% if collection.collector_is_creator %}
                          {% if collection.creator %}
                          <dt>{% trans "Collector" %}</dt><dd>{{ collector.creator }}</dd>
                          {% endif%}
                        {% else %}
                        {% dl_field collection.collector %}
                        {% endif %}
                        {% dl_field collection.publisher %}
                        {% dl_field collection.publisher_collection %}
                        {% dl_field collection.publisher_serial %}
                        {% dl_field collection.booklet_author %}
                        {% dl_field collection.external_references %}
                        {% dl_field collection.doctype_code %}
                        {% dl_field collection.public_access %}
                        {% dl_field collection.legal_rights %}
                    </dl>
                </div>
            </div>
        {% endblock legal_data %}
        </div>
        <div class="extraInfos">
        {% block archive_data %}
            <div>
                <h4><a href="#">{% trans "Archiving data" %}</a></h4>
                <div>
                    <dl class="listing">
                        {% dl_field collection.acquisition_mode %}
                        {% dl_field collection.cnrs_contributor %}
                        {% dl_field collection.metadata_writer %}
                        {% dl_field collection.booklet_description %}
                        {% dl_field collection.publishing_status %}
                        {% dl_field collection.alt_ids %}
                        {% dl_field collection.comment %}
                        {% dl_field collection.metadata_writer %}
                        {% dl_field collection.travail %}
                        {% dl_field collection.items_done %}
                    </dl>
                </div>
            </div>
        {% endblock archive_data %}
        </div>
        <div class="extraInfos">
        {% block technical_data %}
            <div>
                <h4><a href="#">{% trans "Technical data" %}</a></h4>
                <div>
                    <dl class="listing">
                        {% dl_field collection.code %}
                        {% dl_field collection.old_code %}
                        <dt>{% trans "Media type" %}</dt><dd>{% trans "Audio" %}</dd>
                        {% dl_field collection.approx_duration %}
                        {% dl_field collection.computed_duration %}
                        {% dl_field collection.physical_items_num %}
                        <dt>{% trans "Number of items" %}</dt><dd>{{ collection.items.count }}</dd>
                        {% dl_field collection.physical_format %}
                        {% dl_field collection.ad_conversion %}
                    </dl>
                </div>
            </div>
        {% endblock technical_data %}
        </div>
        <h4>Items</h4>
        {% with collection.items.all as items %}
            {% include "telemeta/inc/mediaitem_list.html" %}
        {% endwith %}
        <!--
        {% with collection.ordered_items as items %}
            {% include "telemeta/inc/mediaitem_list.html" %}
        {% endwith %}
        -->
        </div>
    </div>
{% endblock %}
{% else %}
    <p>No such collection</p>
{% endif %}

