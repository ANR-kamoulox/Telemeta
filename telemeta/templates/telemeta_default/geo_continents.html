{% extends "telemeta/base.html" %}
{% load telemeta_utils %}
{% load i18n %}

{% block extra_javascript %}
{% if gmap_key %}
<script src="http://www.google.com/jsapi?key={{ gmap_key }}" type="text/javascript"></script>
<script src="{% url telemeta-js "resourcemap.js" %}" type="text/javascript"></script>
<script type="text/javascript">
var resourceMap = new ResourceMap('.continents', {
    'countryInfoUri': '{% url telemeta-country-info "RESOURCEID" %}'
});
</script>
{% endif %}
{% endblock %}

{% block submenu %}
    <div>
        <a href="#" onclick="resourceMap.toggle('map'); return false;">{% trans "Map" %}</a> |
        <a href="#"onclick="resourceMap.toggle('list'); return false;">{% trans "List" %}</a> 
    </div>
{% endblock %}
{% block content %}
<h3>{% trans "Geographic Navigator" %}</h3>
{% if continents %}
<ul class="continents">
{% for group in continents %}
  <li class="name"><b><a href="{% url telemeta-geo-countries group.continent.flatname %}">{{ group.continent }}</a></b>
    <ul>
    {% for country in group.countries %}
      <li id="resource-{{country.id}}" class="country_name resourcemap-element">
        <a href="{% url telemeta-geo-country-collections group.continent.flatname,country.flatname %}">
          <span class="resourcemap-name">{{ country }}</span></a>
        {% if not country.latitude|is_none and not country.longitude|is_none %}
        <input type="hidden" class="resourcemap-lat" value="{{country.latitude}}" />
        <input type="hidden" class="resourcemap-lng" value="{{country.longitude}}" />
        {% endif %}
      </li>
    {% endfor %}
    {% if group.countries.10 %}
    <li><a href="{% url telemeta-geo-countries group.continent.flatname %}">More..</a></li>
    {% endif %}
    </ul>
  </li>
{% endfor %}
</ul>
{% else %}
<p>No data</p>
{% endif %}
{% endblock %}
