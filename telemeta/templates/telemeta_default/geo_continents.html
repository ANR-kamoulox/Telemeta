{% extends "telemeta/base.html" %}
{% load telemeta_utils %}
{% load i18n %}

{% block extra_javascript %}
{% if gmap_key %}
<script src="http://www.google.com/jsapi?key={{ gmap_key }}" type="text/javascript"></script>
<script src="{% url telemeta-js "resourcemap.js" %}" type="text/javascript"></script>
<script type="text/javascript">
var resourceMap = new ResourceMap('.continents');
</script>
{% endif %}
{% endblock %}

{% block submenu %}
    <div>
        <a href="#" onclick="resourceMap.toggle('map'); return false;">{% trans "Map" %}</a> |
        <a href="#"onclick="resourceMap.toggle('list'); return false;">{% trans "List" %}</a> 
    </div>
{% endblock %}
{% block content %}
<h3>Geographic Navigator</h3>
{% if continents %}
<ul class="continents">
{% for continent in continents %}
  <li class="name"><b><a href="{% url telemeta-geo-countries continent.location.flatname %}">{{ continent.location }}</a></b>
    <ul>
    {% for country in continent.countries %}
      <li class="country_name resourcemap-element">
        <a href="{% url telemeta-geo-country-collections continent.location.flatname,country.location.flatname %}"
           title="{{ country.count }} {% trans "collections" %}">
          <span class="resourcemap-name">{{ country.location }}</span></a>
        {% if not country.location.latitude|is_none and not country.location.longitude|is_none %}
        <input type="hidden" class="resourcemap-lat" value="{{country.location.latitude}}" />
        <input type="hidden" class="resourcemap-lng" value="{{country.location.longitude}}" />
        {% endif %}
      </li>
    {% endfor %}
    {% if continent.countries.10 %}
    <li><a href="{% url telemeta-geo-countries continent.location.flatname %}">More..</a></li>
    {% endif %}
    </ul>
  </li>
{% endfor %}
</ul>
{% else %}
<p>No data</p>
{% endif %}
{% endblock %}
